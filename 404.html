<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Redirecting...</title>
    <script>
      // GitHub Pages SPA redirect script for monames
      // This script redirects 404 errors to the SPA in /dist/

      var l = window.location;
      var path = l.pathname;

      // Check if path starts with /monames
      if (path.startsWith('/monames')) {
        // Remove /monames prefix
        path = path.substring('/monames'.length);

        // If path doesn't start with /dist, it's a root-level 404
        // Just redirect to /dist/
        if (!path.startsWith('/dist')) {
          l.replace(l.protocol + '//' + l.hostname + '/monames/dist/');
        } else {
          // Path is /dist/something - redirect to /dist/ with path encoded as query param
          // Remove /dist prefix to get the route
          var route = path.substring('/dist'.length);

          // Redirect to /dist/ with the route as a query parameter
          l.replace(
            l.protocol + '//' + l.hostname + '/monames/dist/' +
            '?p=' + route.replace(/&/g, '~and~') +
            (l.search ? '&q=' + l.search.slice(1).replace(/&/g, '~and~') : '') +
            l.hash
          );
        }
      } else {
        // Not a /monames path, just redirect to the app
        l.replace(l.protocol + '//' + l.hostname + '/monames/dist/');
      }
    </script>
  </head>
  <body>
  </body>
</html>
